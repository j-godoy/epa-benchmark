# epa-benchmark

## Prerequisites
- [Maven](https://maven.apache.org/download.cgi)
	- `sudo apt install maven`
- [Java 8](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
	- `sudo add-apt-repository ppa:webupd8team/java`
	- `sudo apt update; sudo apt install oracle-java8-installer`
- [python3.6](https://www.python.org/downloads/release/python-360/)
- [R](https://www.r-project.org/) (optional)
- [Epa-evosuite](https://github.com/j-godoy/epa-evosuite)
- Junit and Hamcrest jar
- SeptUp classpath:
	- Add maven/bin folder to classpath
	- Create JAVA_HOME environment variable pointing to jdk folder
	- Add jdk/bin folder to classpath

## Instructions
0) [optional-recommended] Create "Replication-Package" folder in home user dir and follow the next steps in this folder.
1) Clone epa-evosuite repository: `git clone https://github.com/j-godoy/epa-evosuite.git`
2) In epa-evosuite folder, run `mvn clean install -DskipTests=true`
3) Clone this repository: `git clone https://github.com/j-godoy/epa-benchmark.git`
4) Check config_example.ini for correct folders.
5) Check runs_example.ini. The possible paramenters are: 

	---> [A]\*[B]\*[C]\*[D]\*[E]\*F\*G
	
	
	- **A**: Subject Name. This name must be in the configuration file "runs_example.ini"
	- **B**: Type error: Could be "errprot" to looking for 'protocol failures' or "all" for general faults.
	- **C**: Stopping condition for Evosuite. Example: "maxtime".
	- **D**: budget. This parameter is related with the above parameter. For "maxtime" in C, this parameter is the time budget for stopping condition.
	- **E**: Criterion. This can be any accepted criteria for Evosuite; Or "randoop" for random test suite generation.
	- **F**: run mode. It could be:
		- "1": Just generates test suites.
		- "2": Just calculates metrics (require already generated test suites -run mode 1-). This option calculates statement, branch, epa, epaexception, epaadjacentedges, PIT and mujava coverage. For mujava coverage, you must to put in epa-benchmark/subjects/[SUBJNAME]/mutants/ the mutants generated by mujava (see https://cs.gmu.edu/~offutt/mujava/).
		- "3": Generate both tests suites and metrics.
		- "4": Generate both tests suites and metrics without mujava coverage (recommended).
		- "5": Just calculates metrics without mujava coverage.
		- "6": Generate only pit mutants histogram (require already generated metrics).
		- "7": Only calculates test suites Lines Of Code (LOC) and exception coverage (require already generated metrics).
	- **G**: repetitions. Number of repetition to run the experiments. Example: "30". 
5) Run `python script.py config_example.ini runs_example.ini`

# Results
- In epa-benchmark/results there will be at least 3 folders and 3 files:
  - `testgen` folder: test suites (.java) generated by epa-evosuite for all subjects and some logging info.
  - `metrics` folder: all metrics extracted from the test suites.
  - `subjects` folder: bin files for all subjects executed.
  - `results.csv`: final results.
  - `pit_histogram.csv`: histogram of pit mutants for each subject and each criterion.
  - `mujava_histogram.csv`: histogram of mujava mutants (only valid when is executed with mujava option in runs_example.ini)
  
